import{_ as t,r as o,o as c,c as i,b as n,d as a,e as s,a as l}from"./app.2a439a8a.js";const p={},r=n("h1",{id:"\u3010q140\u3011\u524D\u7AEF\u5982\u4F55\u5BF9\u5206\u652F\u73AF\u5883\u8FDB\u884C\u90E8\u7F72",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u3010q140\u3011\u524D\u7AEF\u5982\u4F55\u5BF9\u5206\u652F\u73AF\u5883\u8FDB\u884C\u90E8\u7F72","aria-hidden":"true"},"#"),s(" \u3010Q140\u3011\u524D\u7AEF\u5982\u4F55\u5BF9\u5206\u652F\u73AF\u5883\u8FDB\u884C\u90E8\u7F72")],-1),u={class:"custom-container tip"},d=n("p",{class:"custom-container-title"},"Issue",-1),k=s("\u6B22\u8FCE\u5728 Gtihub Issue \u4E2D\u56DE\u7B54\u6B64\u95EE\u9898: "),_={href:"https://github.com/kangyana/daily-question/issues/140",target:"_blank",rel:"noopener noreferrer"},v=s("Issue 140"),m={class:"custom-container tip"},h=n("p",{class:"custom-container-title"},"Author",-1),b=s("\u56DE\u7B54\u8005: "),g={href:"https://github.com/kangyana",target:"_blank",rel:"noopener noreferrer"},f=s("kangyana"),M=l(`<p>\u4E00\u79CD\u57FA\u4E8E\u5BB9\u5668\u53CA docker-compose \u6216\u8005 k8s \u7684\u601D\u8DEF</p><ul><li>\u501F\u7528\u73B0\u6709\u7684 CICD \u670D\u52A1\uFF0C\u5982 <code>github actions</code> \u6216\u8005 <code>gitlab CI</code> <strong>\u83B7\u53D6\u5F53\u524D\u5206\u652F\u4FE1\u606F</strong></li><li>\u501F\u7528 Docker \u5FEB\u901F\u90E8\u7F72\u524D\u7AEF\u6216\u8005\u540E\u7AEF\uFF0C<strong>\u6839\u636E\u5206\u652F\u4FE1\u606F\u542F\u52A8\u4E0D\u540C\u7684\u670D\u52A1 (Service)\uFF0C\u6839\u636E Docker \u542F\u52A8\u670D\u52A1\u5E76\u914D\u7F6E\u54CD\u5E94\u7684\u6807\u7B7E (Label)</strong></li><li>\u6839\u636E\u5BB9\u5668\u7684\u6807\u7B7E\u4E0E\u5F53\u524D Git \u5206\u652F\u5BF9\u524D\u7AEF\u540E\u7AEF\u8BBE\u7F6E\u4E0D\u540C\u7684\u57DF\u540D</li></ul><p>\u4EE5\u4E0B\u662F\u4E00\u4E2A Preview \u7684\u793A\u4F8B\uFF0C\u5176\u4E2D\u670D\u52A1\u540D <code>cra-preview-\${COMMIT_REF_NAME}</code> \u57FA\u4E8E\u5206\u652F\u540D\u79F0\u8FDB\u884C\u6784\u5EFA\u3002</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&quot;3&quot;</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  cra<span class="token punctuation">-</span>preview<span class="token punctuation">-</span>$<span class="token punctuation">{</span>COMMIT_REF_NAME<span class="token punctuation">}</span><span class="token punctuation">:</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span>
      <span class="token key atrule">context</span><span class="token punctuation">:</span> .
      <span class="token key atrule">dockerfile</span><span class="token punctuation">:</span> router.Dockerfile
    <span class="token key atrule">labels</span><span class="token punctuation">:</span>
      <span class="token comment"># \u914D\u7F6E\u57DF\u540D: Preview</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;traefik.http.routers.cra-preview-\${COMMIT_REF_NAME}.rule=Host(\`\${COMMIT_REF_NAME}.cra.shanyue.tech\`)&quot;</span>
      <span class="token punctuation">-</span> traefik.http.routers.cra<span class="token punctuation">-</span>preview<span class="token punctuation">-</span>$<span class="token punctuation">{</span>COMMIT_REF_NAME<span class="token punctuation">}</span>.tls=true
      <span class="token punctuation">-</span> traefik.http.routers.cra<span class="token punctuation">-</span>preview<span class="token punctuation">-</span>$<span class="token punctuation">{</span>COMMIT_REF_NAME<span class="token punctuation">}</span>.tls.certresolver=le
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728\u8FDB\u884C\u6784\u5EFA\u65F6\uFF0C\u518D\u901A\u8FC7 <code>envsub</code> \u5DE5\u5177\u8FDB\u884C\u73AF\u5883\u53D8\u91CF\u7684\u66FF\u6362</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">cat</span> preview.docker-compose.yaml <span class="token operator">|</span> envsubst <span class="token operator">&gt;</span> docker-compose.yaml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,6);function y(E,I){const e=o("ExternalLinkIcon");return c(),i("div",null,[r,n("div",u,[d,n("p",null,[k,n("a",_,[v,a(e)])])]),n("div",m,[h,n("p",null,[b,n("a",g,[f,a(e)])])]),M])}const C=t(p,[["render",y],["__file","140.html.vue"]]);export{C as default};
