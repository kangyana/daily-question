<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.51">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/images/favicon.ico"><title>【Q091】loader | 每日一题</title><meta name="description" content="每天五分钟，半年大厂中">
    <link rel="modulepreload" href="/assets/app.2a439a8a.js"><link rel="modulepreload" href="/assets/91.html.7a2a749f.js"><link rel="modulepreload" href="/assets/91.html.57f18e44.js"><link rel="prefetch" href="/assets/index.html.33a0dd68.js"><link rel="prefetch" href="/assets/index.html.b925f0c0.js"><link rel="prefetch" href="/assets/index.html.c56635d4.js"><link rel="prefetch" href="/assets/index.html.06d6c73b.js"><link rel="prefetch" href="/assets/index.html.706f0645.js"><link rel="prefetch" href="/assets/1.html.27edf552.js"><link rel="prefetch" href="/assets/10.html.7383416f.js"><link rel="prefetch" href="/assets/11.html.c6fc238a.js"><link rel="prefetch" href="/assets/12.html.74f259c4.js"><link rel="prefetch" href="/assets/13.html.3c5b4a91.js"><link rel="prefetch" href="/assets/14.html.3115b7e0.js"><link rel="prefetch" href="/assets/15.html.7256db36.js"><link rel="prefetch" href="/assets/16.html.cafc53b2.js"><link rel="prefetch" href="/assets/17.html.aa372369.js"><link rel="prefetch" href="/assets/18.html.0474b67f.js"><link rel="prefetch" href="/assets/19.html.f89775a7.js"><link rel="prefetch" href="/assets/2.html.3e619de4.js"><link rel="prefetch" href="/assets/20.html.81f621f7.js"><link rel="prefetch" href="/assets/21.html.0f46e2af.js"><link rel="prefetch" href="/assets/22.html.a9e4b2a2.js"><link rel="prefetch" href="/assets/23.html.b6594ac1.js"><link rel="prefetch" href="/assets/24.html.2d52bcb9.js"><link rel="prefetch" href="/assets/25.html.7ce4e89d.js"><link rel="prefetch" href="/assets/26.html.b853d8ff.js"><link rel="prefetch" href="/assets/27.html.fc0a4b95.js"><link rel="prefetch" href="/assets/28.html.2df1c443.js"><link rel="prefetch" href="/assets/29.html.3f18c822.js"><link rel="prefetch" href="/assets/3.html.42fb625c.js"><link rel="prefetch" href="/assets/30.html.4de25935.js"><link rel="prefetch" href="/assets/31.html.a9e758c5.js"><link rel="prefetch" href="/assets/32.html.88daf987.js"><link rel="prefetch" href="/assets/33.html.a511cf50.js"><link rel="prefetch" href="/assets/34.html.8692bacc.js"><link rel="prefetch" href="/assets/35.html.13a8eff5.js"><link rel="prefetch" href="/assets/36.html.15364126.js"><link rel="prefetch" href="/assets/37.html.964a0e46.js"><link rel="prefetch" href="/assets/38.html.1a2561fb.js"><link rel="prefetch" href="/assets/39.html.e21e79f6.js"><link rel="prefetch" href="/assets/4.html.fa57b958.js"><link rel="prefetch" href="/assets/40.html.7dac2602.js"><link rel="prefetch" href="/assets/41.html.aa812a6e.js"><link rel="prefetch" href="/assets/42.html.08180a44.js"><link rel="prefetch" href="/assets/43.html.fa761dc5.js"><link rel="prefetch" href="/assets/44.html.b3c5d074.js"><link rel="prefetch" href="/assets/45.html.cac5896d.js"><link rel="prefetch" href="/assets/46.html.7542bd94.js"><link rel="prefetch" href="/assets/47.html.f7cd93c7.js"><link rel="prefetch" href="/assets/48.html.8cd4ba64.js"><link rel="prefetch" href="/assets/49.html.ac96906e.js"><link rel="prefetch" href="/assets/5.html.a03396ed.js"><link rel="prefetch" href="/assets/50.html.a283a0f5.js"><link rel="prefetch" href="/assets/51.html.48530cd8.js"><link rel="prefetch" href="/assets/6.html.d1d3aa70.js"><link rel="prefetch" href="/assets/7.html.c1ee96cf.js"><link rel="prefetch" href="/assets/8.html.e3b8b9c4.js"><link rel="prefetch" href="/assets/9.html.d28ee178.js"><link rel="prefetch" href="/assets/52.html.b7a9e291.js"><link rel="prefetch" href="/assets/53.html.90643b9a.js"><link rel="prefetch" href="/assets/54.html.c3d3670d.js"><link rel="prefetch" href="/assets/55.html.acfba55a.js"><link rel="prefetch" href="/assets/56.html.c19635a4.js"><link rel="prefetch" href="/assets/57.html.fc2eced5.js"><link rel="prefetch" href="/assets/58.html.b9029f80.js"><link rel="prefetch" href="/assets/59.html.3b974605.js"><link rel="prefetch" href="/assets/60.html.94914ebc.js"><link rel="prefetch" href="/assets/61.html.0c93953c.js"><link rel="prefetch" href="/assets/62.html.e1ec2c43.js"><link rel="prefetch" href="/assets/63.html.bf7a8245.js"><link rel="prefetch" href="/assets/64.html.0f9c7fc7.js"><link rel="prefetch" href="/assets/65.html.4819adeb.js"><link rel="prefetch" href="/assets/66.html.72630863.js"><link rel="prefetch" href="/assets/67.html.28fb3ee7.js"><link rel="prefetch" href="/assets/68.html.81d8dcc0.js"><link rel="prefetch" href="/assets/69.html.81853ff3.js"><link rel="prefetch" href="/assets/70.html.feecc60d.js"><link rel="prefetch" href="/assets/71.html.670e8d35.js"><link rel="prefetch" href="/assets/72.html.e60ea3ff.js"><link rel="prefetch" href="/assets/73.html.6b233540.js"><link rel="prefetch" href="/assets/74.html.d6352fc7.js"><link rel="prefetch" href="/assets/75.html.d1aab697.js"><link rel="prefetch" href="/assets/76.html.ae78d6a4.js"><link rel="prefetch" href="/assets/77.html.57674b5d.js"><link rel="prefetch" href="/assets/78.html.1cb45461.js"><link rel="prefetch" href="/assets/79.html.352d0f4e.js"><link rel="prefetch" href="/assets/80.html.7235d369.js"><link rel="prefetch" href="/assets/81.html.9d32083d.js"><link rel="prefetch" href="/assets/82.html.5eae198a.js"><link rel="prefetch" href="/assets/83.html.99541ec2.js"><link rel="prefetch" href="/assets/84.html.5bfc7fdc.js"><link rel="prefetch" href="/assets/85.html.0877396f.js"><link rel="prefetch" href="/assets/86.html.093104fc.js"><link rel="prefetch" href="/assets/87.html.68f64f47.js"><link rel="prefetch" href="/assets/88.html.6f80687f.js"><link rel="prefetch" href="/assets/100.html.4ac97423.js"><link rel="prefetch" href="/assets/101.html.fb4ea29a.js"><link rel="prefetch" href="/assets/102.html.7b897450.js"><link rel="prefetch" href="/assets/89.html.5b477b75.js"><link rel="prefetch" href="/assets/90.html.c6d19113.js"><link rel="prefetch" href="/assets/92.html.e1b3ff3b.js"><link rel="prefetch" href="/assets/93.html.3b211a50.js"><link rel="prefetch" href="/assets/94.html.fc2c94f2.js"><link rel="prefetch" href="/assets/95.html.0a01eb0a.js"><link rel="prefetch" href="/assets/96.html.4d609ab5.js"><link rel="prefetch" href="/assets/97.html.742af4c1.js"><link rel="prefetch" href="/assets/98.html.2e63891f.js"><link rel="prefetch" href="/assets/99.html.ead09ca8.js"><link rel="prefetch" href="/assets/103.html.c06992ef.js"><link rel="prefetch" href="/assets/104.html.b6e07b76.js"><link rel="prefetch" href="/assets/105.html.866f0f1f.js"><link rel="prefetch" href="/assets/106.html.71543481.js"><link rel="prefetch" href="/assets/107.html.de42886d.js"><link rel="prefetch" href="/assets/108.html.e7874e60.js"><link rel="prefetch" href="/assets/109.html.75267470.js"><link rel="prefetch" href="/assets/110.html.7b6b6d62.js"><link rel="prefetch" href="/assets/111.html.d4d222b3.js"><link rel="prefetch" href="/assets/112.html.8f70fea6.js"><link rel="prefetch" href="/assets/113.html.674dc1ef.js"><link rel="prefetch" href="/assets/114.html.0d035239.js"><link rel="prefetch" href="/assets/115.html.2ad11070.js"><link rel="prefetch" href="/assets/116.html.d60d53a5.js"><link rel="prefetch" href="/assets/117.html.2fb46f76.js"><link rel="prefetch" href="/assets/118.html.4ca23aad.js"><link rel="prefetch" href="/assets/119.html.98bc84f3.js"><link rel="prefetch" href="/assets/120.html.2f8b0d2b.js"><link rel="prefetch" href="/assets/121.html.905d04ee.js"><link rel="prefetch" href="/assets/122.html.47c18d11.js"><link rel="prefetch" href="/assets/123.html.490e3ccc.js"><link rel="prefetch" href="/assets/124.html.04527473.js"><link rel="prefetch" href="/assets/125.html.a66d1390.js"><link rel="prefetch" href="/assets/126.html.4a318acd.js"><link rel="prefetch" href="/assets/127.html.4c313fe0.js"><link rel="prefetch" href="/assets/128.html.a4801239.js"><link rel="prefetch" href="/assets/129.html.2c6977df.js"><link rel="prefetch" href="/assets/130.html.81fa94ab.js"><link rel="prefetch" href="/assets/131.html.25394b19.js"><link rel="prefetch" href="/assets/132.html.a5197e99.js"><link rel="prefetch" href="/assets/133.html.e84c7381.js"><link rel="prefetch" href="/assets/134.html.1fd5e16a.js"><link rel="prefetch" href="/assets/135.html.535582dc.js"><link rel="prefetch" href="/assets/136.html.68c8208e.js"><link rel="prefetch" href="/assets/137.html.01590b83.js"><link rel="prefetch" href="/assets/138.html.0671ac5e.js"><link rel="prefetch" href="/assets/139.html.28c6d294.js"><link rel="prefetch" href="/assets/140.html.d04802fa.js"><link rel="prefetch" href="/assets/141.html.59508af4.js"><link rel="prefetch" href="/assets/142.html.ef4e1cda.js"><link rel="prefetch" href="/assets/143.html.8b178ffb.js"><link rel="prefetch" href="/assets/404.html.c3e557d0.js"><link rel="prefetch" href="/assets/index.html.681fc8fe.js"><link rel="prefetch" href="/assets/index.html.6fa8ab8c.js"><link rel="prefetch" href="/assets/index.html.8d5f3ff8.js"><link rel="prefetch" href="/assets/index.html.aa4b0f62.js"><link rel="prefetch" href="/assets/index.html.15320177.js"><link rel="prefetch" href="/assets/1.html.4c0fca60.js"><link rel="prefetch" href="/assets/10.html.e02cce84.js"><link rel="prefetch" href="/assets/11.html.86a31a17.js"><link rel="prefetch" href="/assets/12.html.8aca73ff.js"><link rel="prefetch" href="/assets/13.html.5e365985.js"><link rel="prefetch" href="/assets/14.html.0ede8e45.js"><link rel="prefetch" href="/assets/15.html.4d81bcdd.js"><link rel="prefetch" href="/assets/16.html.921a3795.js"><link rel="prefetch" href="/assets/17.html.9e9b3ec4.js"><link rel="prefetch" href="/assets/18.html.4908f3f0.js"><link rel="prefetch" href="/assets/19.html.8906d1ff.js"><link rel="prefetch" href="/assets/2.html.dfe628a0.js"><link rel="prefetch" href="/assets/20.html.c66d654b.js"><link rel="prefetch" href="/assets/21.html.9560d984.js"><link rel="prefetch" href="/assets/22.html.c3375b8d.js"><link rel="prefetch" href="/assets/23.html.edb89c74.js"><link rel="prefetch" href="/assets/24.html.c5a35abc.js"><link rel="prefetch" href="/assets/25.html.770665a6.js"><link rel="prefetch" href="/assets/26.html.ae83bc6b.js"><link rel="prefetch" href="/assets/27.html.45e64add.js"><link rel="prefetch" href="/assets/28.html.4cfe742b.js"><link rel="prefetch" href="/assets/29.html.b77e0ffa.js"><link rel="prefetch" href="/assets/3.html.0a37bbda.js"><link rel="prefetch" href="/assets/30.html.632dd61e.js"><link rel="prefetch" href="/assets/31.html.b6f5ccfc.js"><link rel="prefetch" href="/assets/32.html.5c7aa9df.js"><link rel="prefetch" href="/assets/33.html.2a6f2aa0.js"><link rel="prefetch" href="/assets/34.html.78a46ce0.js"><link rel="prefetch" href="/assets/35.html.66e7cc06.js"><link rel="prefetch" href="/assets/36.html.f5ecffa3.js"><link rel="prefetch" href="/assets/37.html.2f277b1b.js"><link rel="prefetch" href="/assets/38.html.2c51b7e7.js"><link rel="prefetch" href="/assets/39.html.5eabf1f9.js"><link rel="prefetch" href="/assets/4.html.dc9204c2.js"><link rel="prefetch" href="/assets/40.html.7f502342.js"><link rel="prefetch" href="/assets/41.html.a329b462.js"><link rel="prefetch" href="/assets/42.html.240e24a2.js"><link rel="prefetch" href="/assets/43.html.3325681a.js"><link rel="prefetch" href="/assets/44.html.89701cfc.js"><link rel="prefetch" href="/assets/45.html.8192e416.js"><link rel="prefetch" href="/assets/46.html.b3b445c8.js"><link rel="prefetch" href="/assets/47.html.e0c01ac5.js"><link rel="prefetch" href="/assets/48.html.48db9ee4.js"><link rel="prefetch" href="/assets/49.html.30be2bc4.js"><link rel="prefetch" href="/assets/5.html.25573f23.js"><link rel="prefetch" href="/assets/50.html.ed66ad55.js"><link rel="prefetch" href="/assets/51.html.d331d253.js"><link rel="prefetch" href="/assets/6.html.475aa4a9.js"><link rel="prefetch" href="/assets/7.html.b0f8eb80.js"><link rel="prefetch" href="/assets/8.html.1e4261d4.js"><link rel="prefetch" href="/assets/9.html.abedecbf.js"><link rel="prefetch" href="/assets/52.html.7255ccca.js"><link rel="prefetch" href="/assets/53.html.c8311aab.js"><link rel="prefetch" href="/assets/54.html.6a9a168d.js"><link rel="prefetch" href="/assets/55.html.1f7c265f.js"><link rel="prefetch" href="/assets/56.html.0249b7bd.js"><link rel="prefetch" href="/assets/57.html.2861e79b.js"><link rel="prefetch" href="/assets/58.html.191166b5.js"><link rel="prefetch" href="/assets/59.html.b3556d81.js"><link rel="prefetch" href="/assets/60.html.c3b10916.js"><link rel="prefetch" href="/assets/61.html.cc6c74c1.js"><link rel="prefetch" href="/assets/62.html.3903e498.js"><link rel="prefetch" href="/assets/63.html.c2b1ddd6.js"><link rel="prefetch" href="/assets/64.html.53e03f91.js"><link rel="prefetch" href="/assets/65.html.1cab6937.js"><link rel="prefetch" href="/assets/66.html.2ae15a6e.js"><link rel="prefetch" href="/assets/67.html.a935be4c.js"><link rel="prefetch" href="/assets/68.html.0db9fe79.js"><link rel="prefetch" href="/assets/69.html.ce04698f.js"><link rel="prefetch" href="/assets/70.html.ed1f6b94.js"><link rel="prefetch" href="/assets/71.html.d282f838.js"><link rel="prefetch" href="/assets/72.html.9fd08a5c.js"><link rel="prefetch" href="/assets/73.html.71303c99.js"><link rel="prefetch" href="/assets/74.html.b917eb68.js"><link rel="prefetch" href="/assets/75.html.e67993e8.js"><link rel="prefetch" href="/assets/76.html.8aab3f55.js"><link rel="prefetch" href="/assets/77.html.50c38304.js"><link rel="prefetch" href="/assets/78.html.1c723006.js"><link rel="prefetch" href="/assets/79.html.b4c81d9f.js"><link rel="prefetch" href="/assets/80.html.5b4ffc97.js"><link rel="prefetch" href="/assets/81.html.1d2adbd2.js"><link rel="prefetch" href="/assets/82.html.e434a2f9.js"><link rel="prefetch" href="/assets/83.html.c82691a9.js"><link rel="prefetch" href="/assets/84.html.9cb88a47.js"><link rel="prefetch" href="/assets/85.html.740b3123.js"><link rel="prefetch" href="/assets/86.html.dbf629cb.js"><link rel="prefetch" href="/assets/87.html.7bf52b15.js"><link rel="prefetch" href="/assets/88.html.651b5d27.js"><link rel="prefetch" href="/assets/100.html.ff134673.js"><link rel="prefetch" href="/assets/101.html.af312988.js"><link rel="prefetch" href="/assets/102.html.c84337a2.js"><link rel="prefetch" href="/assets/89.html.a4aca3d8.js"><link rel="prefetch" href="/assets/90.html.d82ca3bf.js"><link rel="prefetch" href="/assets/92.html.9dd0ce16.js"><link rel="prefetch" href="/assets/93.html.c1f14bbc.js"><link rel="prefetch" href="/assets/94.html.ca59bc1f.js"><link rel="prefetch" href="/assets/95.html.95472b81.js"><link rel="prefetch" href="/assets/96.html.5f780378.js"><link rel="prefetch" href="/assets/97.html.03eb13af.js"><link rel="prefetch" href="/assets/98.html.eb98f367.js"><link rel="prefetch" href="/assets/99.html.e16a6723.js"><link rel="prefetch" href="/assets/103.html.8025352a.js"><link rel="prefetch" href="/assets/104.html.d59ac089.js"><link rel="prefetch" href="/assets/105.html.5ad3bdf0.js"><link rel="prefetch" href="/assets/106.html.41f2e13c.js"><link rel="prefetch" href="/assets/107.html.835dce17.js"><link rel="prefetch" href="/assets/108.html.2133dceb.js"><link rel="prefetch" href="/assets/109.html.9489f03a.js"><link rel="prefetch" href="/assets/110.html.c94c7102.js"><link rel="prefetch" href="/assets/111.html.c71a82da.js"><link rel="prefetch" href="/assets/112.html.2a777eaf.js"><link rel="prefetch" href="/assets/113.html.dd00f2e4.js"><link rel="prefetch" href="/assets/114.html.e638b632.js"><link rel="prefetch" href="/assets/115.html.861d5084.js"><link rel="prefetch" href="/assets/116.html.1714f751.js"><link rel="prefetch" href="/assets/117.html.924f065a.js"><link rel="prefetch" href="/assets/118.html.af26f91a.js"><link rel="prefetch" href="/assets/119.html.a050c713.js"><link rel="prefetch" href="/assets/120.html.d662b8ef.js"><link rel="prefetch" href="/assets/121.html.15a694af.js"><link rel="prefetch" href="/assets/122.html.2debd177.js"><link rel="prefetch" href="/assets/123.html.210a181d.js"><link rel="prefetch" href="/assets/124.html.141bd2dd.js"><link rel="prefetch" href="/assets/125.html.8f31107a.js"><link rel="prefetch" href="/assets/126.html.100e7740.js"><link rel="prefetch" href="/assets/127.html.375467ef.js"><link rel="prefetch" href="/assets/128.html.e0671271.js"><link rel="prefetch" href="/assets/129.html.6c6bfa58.js"><link rel="prefetch" href="/assets/130.html.e505df36.js"><link rel="prefetch" href="/assets/131.html.8d700c97.js"><link rel="prefetch" href="/assets/132.html.faddc01f.js"><link rel="prefetch" href="/assets/133.html.88e3c00d.js"><link rel="prefetch" href="/assets/134.html.baee83bd.js"><link rel="prefetch" href="/assets/135.html.9ea35886.js"><link rel="prefetch" href="/assets/136.html.cf991682.js"><link rel="prefetch" href="/assets/137.html.c3208264.js"><link rel="prefetch" href="/assets/138.html.8f9d8cd4.js"><link rel="prefetch" href="/assets/139.html.ac25d7f7.js"><link rel="prefetch" href="/assets/140.html.81522b10.js"><link rel="prefetch" href="/assets/141.html.53a1b0f3.js"><link rel="prefetch" href="/assets/142.html.fc81d982.js"><link rel="prefetch" href="/assets/143.html.ad335aaa.js"><link rel="prefetch" href="/assets/404.html.58783704.js">
    <link rel="stylesheet" href="/assets/style.f4d22aab.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name">每日一题</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="主页"><!--[--><!--]--> 主页 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/fe" class="router-link-active" aria-label="前端基础"><!--[--><!--]--> 前端基础 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/editor" class="" aria-label="编辑器"><!--[--><!--]--> 编辑器 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/3d" class="" aria-label="3d"><!--[--><!--]--> 3d <!--[--><!--]--></a></div><div class="navbar-item"><a href="/media" class="" aria-label="音媒体"><!--[--><!--]--> 音媒体 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/kangyana/daily-question" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="主页"><!--[--><!--]--> 主页 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/fe" class="router-link-active" aria-label="前端基础"><!--[--><!--]--> 前端基础 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/editor" class="" aria-label="编辑器"><!--[--><!--]--> 编辑器 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/3d" class="" aria-label="3d"><!--[--><!--]--> 3d <!--[--><!--]--></a></div><div class="navbar-item"><a href="/media" class="" aria-label="音媒体"><!--[--><!--]--> 音媒体 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/kangyana/daily-question" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/fe" class="router-link-active sidebar-item sidebar-heading" aria-label="目录"><!--[--><!--]--> 目录 <!--[--><!--]--></a><!----></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">javascript <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/fe/javascript/1.html" class="sidebar-item" aria-label="【Q001】js 有几种基本的数据类型"><!--[--><!--]--> 【Q001】js 有几种基本的数据类型 <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/2.html" class="sidebar-item" aria-label="【Q002】如何判断 js 数据类型"><!--[--><!--]--> 【Q002】如何判断 js 数据类型 <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/3.html" class="sidebar-item" aria-label="【Q003】typeof和instanceof的区别"><!--[--><!--]--> 【Q003】typeof和instanceof的区别 <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/4.html" class="sidebar-item" aria-label="【Q004】如何判断一个变量是不是Array"><!--[--><!--]--> 【Q004】如何判断一个变量是不是Array <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/5.html" class="sidebar-item" aria-label="【Q005】==和===有什么不同"><!--[--><!--]--> 【Q005】==和===有什么不同 <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/6.html" class="sidebar-item" aria-label="【Q006】事件机制"><!--[--><!--]--> 【Q006】事件机制 <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/7.html" class="sidebar-item" aria-label="【Q007】事件委托"><!--[--><!--]--> 【Q007】事件委托 <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/8.html" class="sidebar-item" aria-label="【Q008】e.preventDefault()是干什么的"><!--[--><!--]--> 【Q008】e.preventDefault()是干什么的 <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/9.html" class="sidebar-item" aria-label="【Q009】JS中this是如何工作的"><!--[--><!--]--> 【Q009】JS中this是如何工作的 <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/10.html" class="sidebar-item" aria-label="【Q010】apply、call、bind的区别，及源码实现"><!--[--><!--]--> 【Q010】apply、call、bind的区别，及源码实现 <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/11.html" class="sidebar-item" aria-label="【Q011】js中new关键字原理"><!--[--><!--]--> 【Q011】js中new关键字原理 <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/12.html" class="sidebar-item" aria-label="【Q012】JS 中继承是如何实现的"><!--[--><!--]--> 【Q012】JS 中继承是如何实现的 <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/13.html" class="sidebar-item" aria-label="【Q013】JS 原型和原型链"><!--[--><!--]--> 【Q013】JS 原型和原型链 <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/14.html" class="sidebar-item" aria-label="【Q014】闭包与作用域链"><!--[--><!--]--> 【Q014】闭包与作用域链 <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/15.html" class="sidebar-item" aria-label="【Q015】let、const、var的区别"><!--[--><!--]--> 【Q015】let、const、var的区别 <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/16.html" class="sidebar-item" aria-label="【Q016】JS 中变量声明提升"><!--[--><!--]--> 【Q016】JS 中变量声明提升 <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/17.html" class="sidebar-item" aria-label="【Q017】JS 模块化"><!--[--><!--]--> 【Q017】JS 模块化 <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/18.html" class="sidebar-item" aria-label="【Q018】IIFE 立即执行函数"><!--[--><!--]--> 【Q018】IIFE 立即执行函数 <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/19.html" class="sidebar-item" aria-label="【Q019】匿名函数"><!--[--><!--]--> 【Q019】匿名函数 <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/20.html" class="sidebar-item" aria-label="【Q020】箭头函数"><!--[--><!--]--> 【Q020】箭头函数 <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/21.html" class="sidebar-item" aria-label="【Q021】函数柯里化"><!--[--><!--]--> 【Q021】函数柯里化 <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/22.html" class="sidebar-item" aria-label="【Q022】Promise"><!--[--><!--]--> 【Q022】Promise <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/23.html" class="sidebar-item" aria-label="【Q023】async/await"><!--[--><!--]--> 【Q023】async/await <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/24.html" class="sidebar-item" aria-label="【Q024】Generator"><!--[--><!--]--> 【Q024】Generator <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/25.html" class="sidebar-item" aria-label="【Q025】对象遍历 和 数组遍历"><!--[--><!--]--> 【Q025】对象遍历 和 数组遍历 <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/26.html" class="sidebar-item" aria-label="【Q026】常见的数组方法"><!--[--><!--]--> 【Q026】常见的数组方法 <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/27.html" class="sidebar-item" aria-label="【Q027】Ajax 工作原理"><!--[--><!--]--> 【Q027】Ajax 工作原理 <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/28.html" class="sidebar-item" aria-label="【Q028】fetch"><!--[--><!--]--> 【Q028】fetch <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/29.html" class="sidebar-item" aria-label="【Q029】同源策略（same-origin policy）"><!--[--><!--]--> 【Q029】同源策略（same-origin policy） <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/30.html" class="sidebar-item" aria-label="【Q030】JS strict模式"><!--[--><!--]--> 【Q030】JS strict模式 <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/31.html" class="sidebar-item" aria-label="【Q031】cookie"><!--[--><!--]--> 【Q031】cookie <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/32.html" class="sidebar-item" aria-label="【Q032】sessionStorage、localStorage"><!--[--><!--]--> 【Q032】sessionStorage、localStorage <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/33.html" class="sidebar-item" aria-label="【Q032】IndexedDB"><!--[--><!--]--> 【Q032】IndexedDB <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/34.html" class="sidebar-item" aria-label="【Q034】web worker"><!--[--><!--]--> 【Q034】web worker <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/35.html" class="sidebar-item" aria-label="【Q035】请解释什么是单页面应用"><!--[--><!--]--> 【Q035】请解释什么是单页面应用 <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/36.html" class="sidebar-item" aria-label="【Q036】可变对象和不可变对象"><!--[--><!--]--> 【Q036】可变对象和不可变对象 <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/37.html" class="sidebar-item" aria-label="【Q037】什么是事件循环（event loop）"><!--[--><!--]--> 【Q037】什么是事件循环（event loop） <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/38.html" class="sidebar-item" aria-label="【Q038】创建对象有几种方法"><!--[--><!--]--> 【Q038】创建对象有几种方法 <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/39.html" class="sidebar-item" aria-label="【Q039】深拷贝和浅拷贝"><!--[--><!--]--> 【Q039】深拷贝和浅拷贝 <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/40.html" class="sidebar-item" aria-label="【Q040】网页各种高度"><!--[--><!--]--> 【Q040】网页各种高度 <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/41.html" class="sidebar-item" aria-label="【Q041】requestAnimationFrame"><!--[--><!--]--> 【Q041】requestAnimationFrame <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/42.html" class="sidebar-item" aria-label="【Q042】requestIdleCallback"><!--[--><!--]--> 【Q042】requestIdleCallback <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/43.html" class="sidebar-item" aria-label="【Q043】webassembly"><!--[--><!--]--> 【Q043】webassembly <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/44.html" class="sidebar-item" aria-label="【Q044】垃圾回收"><!--[--><!--]--> 【Q044】垃圾回收 <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/45.html" class="sidebar-item" aria-label="【Q045】proxy"><!--[--><!--]--> 【Q045】proxy <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/46.html" class="sidebar-item" aria-label="【Q046】Object.defineProperty"><!--[--><!--]--> 【Q046】Object.defineProperty <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/47.html" class="sidebar-item" aria-label="【Q047】map set"><!--[--><!--]--> 【Q047】map set <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/48.html" class="sidebar-item" aria-label="【Q048】null 和 undefined 的区别"><!--[--><!--]--> 【Q048】null 和 undefined 的区别 <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/49.html" class="sidebar-item" aria-label="【Q049】symbol"><!--[--><!--]--> 【Q049】symbol <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/50.html" class="sidebar-item" aria-label="【Q050】Object.assign"><!--[--><!--]--> 【Q050】Object.assign <!--[--><!--]--></a><!----></li><li><a href="/fe/javascript/51.html" class="sidebar-item" aria-label="【Q051】常见的 DOM 方法"><!--[--><!--]--> 【Q051】常见的 DOM 方法 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">react <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/fe/react/52.html" class="sidebar-item" aria-label="【Q052】React 17、React 18新特性"><!--[--><!--]--> 【Q052】React 17、React 18新特性 <!--[--><!--]--></a><!----></li><li><a href="/fe/react/53.html" class="sidebar-item" aria-label="【Q053】虚拟 DOM 是什么？以及 Diff 算法原理"><!--[--><!--]--> 【Q053】虚拟 DOM 是什么？以及 Diff 算法原理 <!--[--><!--]--></a><!----></li><li><a href="/fe/react/54.html" class="sidebar-item" aria-label="【Q054】key 是干什么的"><!--[--><!--]--> 【Q054】key 是干什么的 <!--[--><!--]--></a><!----></li><li><a href="/fe/react/55.html" class="sidebar-item" aria-label="【Q055】Fiber"><!--[--><!--]--> 【Q055】Fiber <!--[--><!--]--></a><!----></li><li><a href="/fe/react/56.html" class="sidebar-item" aria-label="【Q056】React 事件机制和原生事件机制的关系"><!--[--><!--]--> 【Q056】React 事件机制和原生事件机制的关系 <!--[--><!--]--></a><!----></li><li><a href="/fe/react/57.html" class="sidebar-item" aria-label="【Q057】React 生命周期"><!--[--><!--]--> 【Q057】React 生命周期 <!--[--><!--]--></a><!----></li><li><a href="/fe/react/58.html" class="sidebar-item" aria-label="【Q058】React 组件性能优化"><!--[--><!--]--> 【Q058】React 组件性能优化 <!--[--><!--]--></a><!----></li><li><a href="/fe/react/59.html" class="sidebar-item" aria-label="【Q059】React.memo"><!--[--><!--]--> 【Q059】React.memo <!--[--><!--]--></a><!----></li><li><a href="/fe/react/60.html" class="sidebar-item" aria-label="【Q060】props.children"><!--[--><!--]--> 【Q060】props.children <!--[--><!--]--></a><!----></li><li><a href="/fe/react/61.html" class="sidebar-item" aria-label="【Q061】content"><!--[--><!--]--> 【Q061】content <!--[--><!--]--></a><!----></li><li><a href="/fe/react/62.html" class="sidebar-item" aria-label="【Q062】setState 是同步还是异步？"><!--[--><!--]--> 【Q062】setState 是同步还是异步？ <!--[--><!--]--></a><!----></li><li><a href="/fe/react/63.html" class="sidebar-item" aria-label="【Q063】setState 批更新"><!--[--><!--]--> 【Q063】setState 批更新 <!--[--><!--]--></a><!----></li><li><a href="/fe/react/64.html" class="sidebar-item" aria-label="【Q064】组件通信"><!--[--><!--]--> 【Q064】组件通信 <!--[--><!--]--></a><!----></li><li><a href="/fe/react/65.html" class="sidebar-item" aria-label="【Q065】高阶组件原理"><!--[--><!--]--> 【Q065】高阶组件原理 <!--[--><!--]--></a><!----></li><li><a href="/fe/react/66.html" class="sidebar-item" aria-label="【Q066】受控组件和非受控组件"><!--[--><!--]--> 【Q066】受控组件和非受控组件 <!--[--><!--]--></a><!----></li><li><a href="/fe/react/67.html" class="sidebar-item" aria-label="【Q067】为什么要是用 React Hooks?"><!--[--><!--]--> 【Q067】为什么要是用 React Hooks? <!--[--><!--]--></a><!----></li><li><a href="/fe/react/68.html" class="sidebar-item" aria-label="【Q068】React Hooks 实现原理"><!--[--><!--]--> 【Q068】React Hooks 实现原理 <!--[--><!--]--></a><!----></li><li><a href="/fe/react/69.html" class="sidebar-item" aria-label="【Q069】React Hooks 使用原则，以及为什么"><!--[--><!--]--> 【Q069】React Hooks 使用原则，以及为什么 <!--[--><!--]--></a><!----></li><li><a href="/fe/react/70.html" class="sidebar-item" aria-label="【Q070】React Hooks 使用中常见问题"><!--[--><!--]--> 【Q070】React Hooks 使用中常见问题 <!--[--><!--]--></a><!----></li><li><a href="/fe/react/71.html" class="sidebar-item" aria-label="【Q071】官方自带的 Hooks"><!--[--><!--]--> 【Q071】官方自带的 Hooks <!--[--><!--]--></a><!----></li><li><a href="/fe/react/72.html" class="sidebar-item" aria-label="【Q072】useEffect 和 useLayoutEffect 的区别"><!--[--><!--]--> 【Q072】useEffect 和 useLayoutEffect 的区别 <!--[--><!--]--></a><!----></li><li><a href="/fe/react/73.html" class="sidebar-item" aria-label="【Q073】useMemo 和 useCallback 的区别"><!--[--><!--]--> 【Q073】useMemo 和 useCallback 的区别 <!--[--><!--]--></a><!----></li><li><a href="/fe/react/74.html" class="sidebar-item" aria-label="【Q074】如何自己封装一个 Hooks"><!--[--><!--]--> 【Q074】如何自己封装一个 Hooks <!--[--><!--]--></a><!----></li><li><a href="/fe/react/75.html" class="sidebar-item" aria-label="【Q075】Suspense"><!--[--><!--]--> 【Q075】Suspense <!--[--><!--]--></a><!----></li><li><a href="/fe/react/76.html" class="sidebar-item" aria-label="【Q076】Concurrent"><!--[--><!--]--> 【Q076】Concurrent <!--[--><!--]--></a><!----></li><li><a href="/fe/react/77.html" class="sidebar-item" aria-label="【Q077】startTransition"><!--[--><!--]--> 【Q077】startTransition <!--[--><!--]--></a><!----></li><li><a href="/fe/react/78.html" class="sidebar-item" aria-label="【Q078】Server Component"><!--[--><!--]--> 【Q078】Server Component <!--[--><!--]--></a><!----></li><li><a href="/fe/react/79.html" class="sidebar-item" aria-label="【Q079】componentDidCatch"><!--[--><!--]--> 【Q079】componentDidCatch <!--[--><!--]--></a><!----></li><li><a href="/fe/react/80.html" class="sidebar-item" aria-label="【Q080】SSR"><!--[--><!--]--> 【Q080】SSR <!--[--><!--]--></a><!----></li><li><a href="/fe/react/81.html" class="sidebar-item" aria-label="【Q081】为什么需要用 redux"><!--[--><!--]--> 【Q081】为什么需要用 redux <!--[--><!--]--></a><!----></li><li><a href="/fe/react/82.html" class="sidebar-item" aria-label="【Q082】react-redux 是干什么的"><!--[--><!--]--> 【Q082】react-redux 是干什么的 <!--[--><!--]--></a><!----></li><li><a href="/fe/react/83.html" class="sidebar-item" aria-label="【Q083】react-redux connect 实现原理"><!--[--><!--]--> 【Q083】react-redux connect 实现原理 <!--[--><!--]--></a><!----></li><li><a href="/fe/react/84.html" class="sidebar-item" aria-label="【Q084】redux 工作流程及原理"><!--[--><!--]--> 【Q084】redux 工作流程及原理 <!--[--><!--]--></a><!----></li><li><a href="/fe/react/85.html" class="sidebar-item" aria-label="【Q085】有没有用过其它状态管理器？以及原理"><!--[--><!--]--> 【Q085】有没有用过其它状态管理器？以及原理 <!--[--><!--]--></a><!----></li><li><a href="/fe/react/86.html" class="sidebar-item" aria-label="【Q086】react-router 路由实现原理"><!--[--><!--]--> 【Q086】react-router 路由实现原理 <!--[--><!--]--></a><!----></li><li><a href="/fe/react/87.html" class="sidebar-item" aria-label="【Q087】react-router 有几种路由类型？"><!--[--><!--]--> 【Q087】react-router 有几种路由类型？ <!--[--><!--]--></a><!----></li><li><a href="/fe/react/88.html" class="sidebar-item" aria-label="【Q088】项目本地开发完成后部署到服务器后报 404"><!--[--><!--]--> 【Q088】项目本地开发完成后部署到服务器后报 404 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading active collapsible">webpack <span class="down arrow"></span></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/fe/webpack/89.html" class="sidebar-item" aria-label="【Q089】为什么需要 webpack"><!--[--><!--]--> 【Q089】为什么需要 webpack <!--[--><!--]--></a><!----></li><li><a href="/fe/webpack/90.html" class="sidebar-item" aria-label="【Q090】webpack 5 新特性"><!--[--><!--]--> 【Q090】webpack 5 新特性 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/fe/webpack/91.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="【Q091】loader"><!--[--><!--]--> 【Q091】loader <!--[--><!--]--></a><!----></li><li><a href="/fe/webpack/92.html" class="sidebar-item" aria-label="【Q092】plugin"><!--[--><!--]--> 【Q092】plugin <!--[--><!--]--></a><!----></li><li><a href="/fe/webpack/93.html" class="sidebar-item" aria-label="【Q093】tree shaking"><!--[--><!--]--> 【Q093】tree shaking <!--[--><!--]--></a><!----></li><li><a href="/fe/webpack/94.html" class="sidebar-item" aria-label="【Q094】常见的配置项"><!--[--><!--]--> 【Q094】常见的配置项 <!--[--><!--]--></a><!----></li><li><a href="/fe/webpack/95.html" class="sidebar-item" aria-label="【Q095】publicPath 是干什么的"><!--[--><!--]--> 【Q095】publicPath 是干什么的 <!--[--><!--]--></a><!----></li><li><a href="/fe/webpack/96.html" class="sidebar-item" aria-label="【Q096】打包很慢，怎么解决"><!--[--><!--]--> 【Q096】打包很慢，怎么解决 <!--[--><!--]--></a><!----></li><li><a href="/fe/webpack/97.html" class="sidebar-item" aria-label="【Q097】打包出来的文件很大，怎么解决？"><!--[--><!--]--> 【Q097】打包出来的文件很大，怎么解决？ <!--[--><!--]--></a><!----></li><li><a href="/fe/webpack/98.html" class="sidebar-item" aria-label="【Q098】模块联邦"><!--[--><!--]--> 【Q098】模块联邦 <!--[--><!--]--></a><!----></li><li><a href="/fe/webpack/99.html" class="sidebar-item" aria-label="【Q099】HMR 原理"><!--[--><!--]--> 【Q099】HMR 原理 <!--[--><!--]--></a><!----></li><li><a href="/fe/webpack/100.html" class="sidebar-item" aria-label="【Q100】有了解过现在流行的 bundleless 构建工具吗？"><!--[--><!--]--> 【Q100】有了解过现在流行的 bundleless 构建工具吗？ <!--[--><!--]--></a><!----></li><li><a href="/fe/webpack/101.html" class="sidebar-item" aria-label="【Q101】vite 原理"><!--[--><!--]--> 【Q101】vite 原理 <!--[--><!--]--></a><!----></li><li><a href="/fe/webpack/102.html" class="sidebar-item" aria-label="【Q102】sourceMap"><!--[--><!--]--> 【Q102】sourceMap <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">工程化 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/fe/工程化/103.html" class="sidebar-item" aria-label="【Q103】打包时 cjs、es、umd 模块有何不同"><!--[--><!--]--> 【Q103】打包时 cjs、es、umd 模块有何不同 <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/104.html" class="sidebar-item" aria-label="【Q104】什么是 AST，及其应用"><!--[--><!--]--> 【Q104】什么是 AST，及其应用 <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/105.html" class="sidebar-item" aria-label="【Q105】webpack 的 runtime 做了什么事情"><!--[--><!--]--> 【Q105】webpack 的 runtime 做了什么事情 <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/106.html" class="sidebar-item" aria-label="【Q106】webpack 中的 code spliting 是如何动态加载 chunk 的？"><!--[--><!--]--> 【Q106】webpack 中的 code spliting 是如何动态加载 chunk 的？ <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/107.html" class="sidebar-item" aria-label="【Q107】打包器 如何加载 json、image 等非 Javascript 资源"><!--[--><!--]--> 【Q107】打包器 如何加载 json、image 等非 Javascript 资源 <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/108.html" class="sidebar-item" aria-label="【Q108】打包器 如何加载 style 样式资源"><!--[--><!--]--> 【Q108】打包器 如何加载 style 样式资源 <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/109.html" class="sidebar-item" aria-label="【Q109】打包器 如何将打包后的 js 资源注入 html 中"><!--[--><!--]--> 【Q109】打包器 如何将打包后的 js 资源注入 html 中 <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/110.html" class="sidebar-item" aria-label="【Q110】webpack 中什么是 HMR，原理是什么"><!--[--><!--]--> 【Q110】webpack 中什么是 HMR，原理是什么 <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/111.html" class="sidebar-item" aria-label="【Q111】如何提升 webpack 构建资源的速度"><!--[--><!--]--> 【Q111】如何提升 webpack 构建资源的速度 <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/112.html" class="sidebar-item" aria-label="【Q112】如何分析前端打包体积"><!--[--><!--]--> 【Q112】如何分析前端打包体积 <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/113.html" class="sidebar-item" aria-label="【Q113】js 代码压缩 minify 的原理是什么"><!--[--><!--]--> 【Q113】js 代码压缩 minify 的原理是什么 <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/114.html" class="sidebar-item" aria-label="【Q114】Tree Shaking 的原理是什么"><!--[--><!--]--> 【Q114】Tree Shaking 的原理是什么 <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/115.html" class="sidebar-item" aria-label="【Q115】core-js 是做什么用的？"><!--[--><!--]--> 【Q115】core-js 是做什么用的？ <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/116.html" class="sidebar-item" aria-label="【Q116】browserslist 是做什么的？"><!--[--><!--]--> 【Q116】browserslist 是做什么的？ <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/117.html" class="sidebar-item" aria-label="【Q117】浏览器中如何使用原生的 ESM"><!--[--><!--]--> 【Q117】浏览器中如何使用原生的 ESM <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/118.html" class="sidebar-item" aria-label="【Q118】如何将 CommonJS 转化为 ESM"><!--[--><!--]--> 【Q118】如何将 CommonJS 转化为 ESM <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/119.html" class="sidebar-item" aria-label="【Q119】简述 bundless 的优势与不足"><!--[--><!--]--> 【Q119】简述 bundless 的优势与不足 <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/120.html" class="sidebar-item" aria-label="【Q120】什么是 semver，~1.2.3 与 ^1.2.3 的版本号范围是多少"><!--[--><!--]--> 【Q120】什么是 semver，~1.2.3 与 ^1.2.3 的版本号范围是多少 <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/121.html" class="sidebar-item" aria-label="【Q121】package.json 中 main/module/browser/exports 字段"><!--[--><!--]--> 【Q121】package.json 中 main/module/browser/exports 字段 <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/122.html" class="sidebar-item" aria-label="【Q122】dependencies 与 devDependencies 有何区别"><!--[--><!--]--> 【Q122】dependencies 与 devDependencies 有何区别 <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/123.html" class="sidebar-item" aria-label="【Q123】如何为一个项目指定 node 版本号"><!--[--><!--]--> 【Q123】如何为一个项目指定 node 版本号 <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/124.html" class="sidebar-item" aria-label="【Q124】简述 npm script 的生命周期"><!--[--><!--]--> 【Q124】简述 npm script 的生命周期 <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/125.html" class="sidebar-item" aria-label="【Q125】如何对 npm package 进行发包"><!--[--><!--]--> 【Q125】如何对 npm package 进行发包 <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/126.html" class="sidebar-item" aria-label="【Q126】package-lock.json 有什么作用"><!--[--><!--]--> 【Q126】package-lock.json 有什么作用 <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/127.html" class="sidebar-item" aria-label="【Q127】npm 第三方库需要提交 lockfile 吗"><!--[--><!--]--> 【Q127】npm 第三方库需要提交 lockfile 吗 <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/128.html" class="sidebar-item" aria-label="【Q128】简述 npm cache"><!--[--><!--]--> 【Q128】简述 npm cache <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/129.html" class="sidebar-item" aria-label="【Q129】node_modules 的目录结构(拓扑结构)"><!--[--><!--]--> 【Q129】node_modules 的目录结构(拓扑结构) <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/130.html" class="sidebar-item" aria-label="【Q130】pnpm 有什么优势"><!--[--><!--]--> 【Q130】pnpm 有什么优势 <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/131.html" class="sidebar-item" aria-label="【Q131】请问什么是 CICD"><!--[--><!--]--> 【Q131】请问什么是 CICD <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/132.html" class="sidebar-item" aria-label="【Q132】git hooks 原理是什么"><!--[--><!--]--> 【Q132】git hooks 原理是什么 <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/133.html" class="sidebar-item" aria-label="【Q133】如何检测出你们安装的依赖是否安全"><!--[--><!--]--> 【Q133】如何检测出你们安装的依赖是否安全 <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/134.html" class="sidebar-item" aria-label="【Q134】在项目中，如何平滑升级 npm 包"><!--[--><!--]--> 【Q134】在项目中，如何平滑升级 npm 包 <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/135.html" class="sidebar-item" aria-label="【Q135】请简述下 eslint 的作用"><!--[--><!--]--> 【Q135】请简述下 eslint 的作用 <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/136.html" class="sidebar-item" aria-label="【Q136】如何修复某个 npm 包的紧急 bug"><!--[--><!--]--> 【Q136】如何修复某个 npm 包的紧急 bug <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/137.html" class="sidebar-item" aria-label="【Q137】使用 webpack 打包时，如何更好地利用 long term cache"><!--[--><!--]--> 【Q137】使用 webpack 打包时，如何更好地利用 long term cache <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/138.html" class="sidebar-item" aria-label="【Q138】前端如何进行高效的分包"><!--[--><!--]--> 【Q138】前端如何进行高效的分包 <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/139.html" class="sidebar-item" aria-label="【Q139】如何使用 docker 部署前端"><!--[--><!--]--> 【Q139】如何使用 docker 部署前端 <!--[--><!--]--></a><!----></li><li><a href="/fe/工程化/140.html" class="sidebar-item" aria-label="【Q140】前端如何对分支环境进行部署"><!--[--><!--]--> 【Q140】前端如何对分支环境进行部署 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">算法 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/fe/算法/141.html" class="sidebar-item" aria-label="【Q141】阿里云笔试"><!--[--><!--]--> 【Q141】阿里云笔试 <!--[--><!--]--></a><!----></li><li><a href="/fe/算法/142.html" class="sidebar-item" aria-label="【Q142】CVTE笔试"><!--[--><!--]--> 【Q142】CVTE笔试 <!--[--><!--]--></a><!----></li><li><a href="/fe/算法/143.html" class="sidebar-item" aria-label="【Q143】阿里笔试"><!--[--><!--]--> 【Q143】阿里笔试 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="【q091】loader" tabindex="-1"><a class="header-anchor" href="#【q091】loader" aria-hidden="true">#</a> 【Q091】loader</h1><div class="custom-container tip"><p class="custom-container-title">Issue</p><p>欢迎在 Gtihub Issue 中回答此问题: <a href="https://github.com/kangyana/daily-question/issues/91" target="_blank" rel="noopener noreferrer">Issue 91<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></div><div class="custom-container tip"><p class="custom-container-title">Author</p><p>回答者: <a href="https://github.com/kangyana" target="_blank" rel="noopener noreferrer">kangyana<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></div><h2 id="_1-loader" tabindex="-1"><a class="header-anchor" href="#_1-loader" aria-hidden="true">#</a> 1. loader</h2><p><code>loader</code> 用于对 <strong>模块源代码</strong> 进行转换。 <code>loader</code> 可以使你在 <code>import</code> 或 <strong>加载模块</strong> 时预处理文件。 因此，<code>loader</code> 类似于其他构建工具中 <code>task</code>，并提供了处理前端构建步骤的得力方式。 <code>loader</code> 可以将文件从不同的语言（如 TypeScript）转换为 JavaScript 或将内联图像转换为 <code>data URL</code>。 <code>loader</code> 甚至允许你直接在 JavaScript 模块中 <code>import</code> CSS 文件！</p><h2 id="_2-示例" tabindex="-1"><a class="header-anchor" href="#_2-示例" aria-hidden="true">#</a> 2. 示例</h2><p>例如，你想要加载 CSS 文件、讲TypeScript 转为 JavaScript。 为此，首先安装相对应的 loader：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev css-loader ts-loader
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>然后对每个 <code>.css</code> 文件 使用 <code>css-loader</code>，对每个 <code>.ts</code> 文件使用 <code>ts-loader</code>：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">&#39;css-loader&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.ts$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">&#39;ts-loader&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-使用-loader" tabindex="-1"><a class="header-anchor" href="#_3-使用-loader" aria-hidden="true">#</a> 3. 使用 loader</h2><p><code>loader</code> 有两种使用的方式：</p><ul><li><strong>配置方式</strong>（推荐）：在 <code>webpack.config.js</code> 文件中指定 <code>loader</code>。</li><li><strong>内联方式</strong>：在每个 <code>import</code> 语句中显式指定 <code>loader</code>。</li></ul><h3 id="配置方式-configuration" tabindex="-1"><a class="header-anchor" href="#配置方式-configuration" aria-hidden="true">#</a> 配置方式 Configuration</h3><p><code>module.rules</code> 允许你在 <code>webpack</code> 配置中指定多个 <code>loader</code>。 这种方式是展示 <code>loader</code> 的一种简明方式，并且有助于使代码变得简洁和易于维护。</p><p><code>loader</code> 的执行顺序是从上到下。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token comment">// [style-loader](/loaders/style-loader)</span>
          <span class="token punctuation">{</span> <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;style-loader&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token comment">// [css-loader](/loaders/css-loader)</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token comment">// [sass-loader](/loaders/sass-loader)</span>
          <span class="token punctuation">{</span> <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;sass-loader&#39;</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="内联方式" tabindex="-1"><a class="header-anchor" href="#内联方式" aria-hidden="true">#</a> 内联方式</h3><p>可以在 <code>import</code> 语句或任何 <strong>与 &quot;import&quot; 方法同等的引用方式</strong> 中指定 <code>loader</code>。 使用 <code>!</code> 将资源中的 <code>loader</code> 分开。每个部分都会相对于当前目录解析。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> Styles <span class="token keyword">from</span> <span class="token string">&#39;style-loader!css-loader?modules!./styles.css&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>通过为内联 <code>import</code> 语句添加前缀，可以覆盖 <code>configuration</code> 中的所有 <code>loader</code>, <code>preLoader</code> 和 <code>postLoader</code>：</p><ul><li>使用 <code>!</code> 前缀，将禁用所有已配置的 <strong>普通 loader</strong>。</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> Styles <span class="token keyword">from</span> <span class="token string">&#39;!style-loader!css-loader?modules!./styles.css&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>使用 <code>!!</code> 前缀，将禁用所有已配置的 <code>loader</code>（preLoader, loader, postLoader）。</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> Styles <span class="token keyword">from</span> <span class="token string">&#39;!!style-loader!css-loader?modules!./styles.css&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>使用 <code>-!</code> 前缀，将禁用所有已配置的 <code>preLoader</code> 和 <code>loader</code>，但是不禁用 <code>postLoaders</code>。</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> Styles <span class="token keyword">from</span> <span class="token string">&#39;-!style-loader!css-loader?modules!./styles.css&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="注意-尽可能使用-module-rules-这样可以减少源码中样板文件的代码量。并且可以在出错时快速定位-loader-的问题。" tabindex="-1"><a class="header-anchor" href="#注意-尽可能使用-module-rules-这样可以减少源码中样板文件的代码量。并且可以在出错时快速定位-loader-的问题。" aria-hidden="true">#</a> 注意：尽可能使用 <code>module.rules</code>，这样可以减少源码中样板文件的代码量。并且可以在出错时快速定位 <code>loader</code> 的问题。</h3><div class="custom-container tip"><p class="custom-container-title">Author</p><p>回答者: <a href="https://github.com/kangyana" target="_blank" rel="noopener noreferrer">kangyana<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></div><h2 id="_4-loader-特性" tabindex="-1"><a class="header-anchor" href="#_4-loader-特性" aria-hidden="true">#</a> 4. loader 特性</h2><ul><li><code>loader</code> 支持链式调用。</li><li><code>loader</code> 支持同步，也支持异步。</li><li>可以在 <code>package.json</code> 的 <code>main</code> 指定 npm包 为 <code>loader</code>，还可以在 <code>module.rules</code> 中使用 <code>loader</code> 字段直接引用一个模块。</li><li><code>plugin</code> 可以为 <code>loader</code> 带来更多特性。</li><li><code>loader</code> 能够产生额外的文件。</li></ul><p>可以通过 <code>loader</code> 的预处理函数，进行压缩、打包、编译等功能。</p><h2 id="_5-解析-loader" tabindex="-1"><a class="header-anchor" href="#_5-解析-loader" aria-hidden="true">#</a> 5. 解析 loader</h2><p><code>loader</code> 遵循标准 <strong>模块解析</strong> 规则。 多数情况下，<code>loader</code> 将从 <strong>模块路径</strong> 加载（通常是从 npm install, node_modules 进行加载）。</p><p>预期 <code>loader</code> 模块导出为一个函数，并且编写为 Node.js 兼容的 JavaScript。 通常使用 npm 进行管理 <code>loader</code>，但是也可以将应用程序中的文件作为自定义 <code>loader</code>。 按照约定，<code>loader</code> 通常被命名为 xxx-loader（例如 json-loader）。</p><div class="custom-container tip"><p class="custom-container-title">Author</p><p>回答者: <a href="https://github.com/kangyana" target="_blank" rel="noopener noreferrer">kangyana<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></div><h2 id="_6-编写-loader" tabindex="-1"><a class="header-anchor" href="#_6-编写-loader" aria-hidden="true">#</a> 6. 编写 loader</h2><p><code>loader</code> 是导出为一个函数的 node 模块。 该函数在 <code>loader</code> 转换资源的时候调用。 给定的函数将调用 <code>Loader API</code>，并通过 <code>this</code> 上下文访问。</p><h3 id="匹配-loader" tabindex="-1"><a class="header-anchor" href="#匹配-loader" aria-hidden="true">#</a> 匹配 loader</h3><p>匹配单个 <code>loader</code>，你可以通过在 <code>rule</code> 对象使用 <code>path.resolve</code> 指定一个本地文件：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>

<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;path/to/loader.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>匹配多个 <code>loaders</code>，你可以使用 <code>resolveLoader.modules</code> 配置，<code>webpack</code> 将会从这些目录中搜索这些 <code>loaders</code>。 例如，如果你的项目中有一个 <code>/loaders</code> 本地目录：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>

<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">resolveLoader</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;node_modules&#39;</span><span class="token punctuation">,</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;loaders&#39;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="简单用法" tabindex="-1"><a class="header-anchor" href="#简单用法" aria-hidden="true">#</a> 简单用法</h3><p>当一个 <code>loader</code> 在资源中使用，这个 <code>loader</code> 只能传入一个参数 - 一个包含资源文件内容的字符串。</p><p>同步 <code>loader</code> 可以 <code>return</code> 一个代表已转换模块的单一值。 在更复杂的情况下，<code>loader</code> 也可以通过使用 <code>this.callback(err, values...)</code> 函数，返回任意数量的值。 错误要么传递给这个 <code>this.callback</code> 函数，要么抛给同步 <code>loader </code>。</p><p><code>loader</code> 会返回一个或者两个值。 第一个值的类型是 JavaScript 代码的字符串或者 buffer。 第二个可选值是 <code>SourceMap</code>，它是个 JavaScript 对象。</p><h3 id="复杂用法" tabindex="-1"><a class="header-anchor" href="#复杂用法" aria-hidden="true">#</a> 复杂用法</h3><p>当链式调用多个 <code>loader</code> 的时候，请记住它们是倒序执行的。</p><p>最后的 <code>loader</code> 最早调用，将会传入原始资源内容。 第一个 <code>loader</code> 最后调用，期望值是传出 JavaScript 和 <code>source map</code>（可选）。 中间的 <code>loader</code> 执行时，会传入前一个 <code>loader</code> 的结果。</p><p>在下例中，<code>foo-loader</code> 被传入原始资源，<code>bar-loader</code> 将接收 <code>foo-loader</code> 的产出， 返回最终转化后的模块和一个 <code>source map</code>（可选）。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;bar-loader&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;foo-loader&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="用法准则" tabindex="-1"><a class="header-anchor" href="#用法准则" aria-hidden="true">#</a> 用法准则</h3><p>编写 <code>loader</code> 时应该遵循以下准则：</p><ul><li>保持 <strong>简单</strong></li><li>使用 <strong>链式</strong> 传递</li><li><strong>模块化</strong> 的输出</li><li>确保 <strong>无状态</strong></li><li>使用 <strong>loader-utils包</strong></li><li>记录 <strong>loader 的依赖</strong></li><li>解析 <strong>模块依赖关系</strong></li><li>提取 <strong>通用代码</strong></li><li>避免 <strong>绝对路径</strong></li><li>使用 <strong>同一个依赖</strong>（peerDependency）</li></ul><h3 id="简单" tabindex="-1"><a class="header-anchor" href="#简单" aria-hidden="true">#</a> 简单</h3><p><code>loaders</code> 应该只做单一任务。 这不仅使每个 <code>loader</code> 易维护，也可以在更多场景链式调用。</p><h3 id="链式" tabindex="-1"><a class="header-anchor" href="#链式" aria-hidden="true">#</a> 链式</h3><p>利用 <code>loader</code> 可以链式调用的优势。 写五个简单的 <code>loader</code> 实现五项任务，而不是一个 <code>loader</code> 实现五项任务。 功能隔离不仅使 <code>loader</code> 更简单，还利于后续维护与开发。</p><p>以通过 <code>loader</code> 选项或者查询参数得到的数据渲染模板为例。 可以把源代码编译为模板，执行并输出包含 HTML 代码的字符串写到一个 <code>loader</code> 中。 但是根据用法准则，已经存在这样一个 <code>apply-loader</code>，可以将它和其他开源 <code>loader</code> 串联在一起调用。</p><ul><li><code>pug-loader</code>: 导出一个函数，把模板转换为模块。</li><li><code>apply-loader</code>: 根据 loader 选项执行函数，返回原生 HTML。</li><li><code>html-loader</code>: 接收 HTML，输出一个合法的 JS 模块。</li></ul><p>注意：<code>loader</code> 可以被链式调用意味着不一定要输出 JavaScript。只要下一个 <code>loader</code> 可以处理这个输出，这个 <code>loader</code> 就可以返回任意类型的模块。</p><h3 id="模块化" tabindex="-1"><a class="header-anchor" href="#模块化" aria-hidden="true">#</a> 模块化</h3><p>保证输出模块化。 <code>loader</code> 生成的模块与普通模块遵循相同的设计原则。</p><h3 id="无状态" tabindex="-1"><a class="header-anchor" href="#无状态" aria-hidden="true">#</a> 无状态</h3><p>确保 <code>loader</code> 在不同模块转换之间不保存状态。 每次运行都应该独立于其他编译模块以及相同模块之前的编译结果。</p><h3 id="loader-工具库" tabindex="-1"><a class="header-anchor" href="#loader-工具库" aria-hidden="true">#</a> loader 工具库</h3><p>充分利用 <code>loader-utils</code> 包。 它提供了许多有用的工具，但最常用的一种工具是获取传递给 <code>loader</code> 的选项。</p><p><code>schema-utils</code> 包配合 <code>loader-utils</code>，用于保证 <code>loader</code> 选项，进行与 JSON Schema 结构一致的校验。 这里有一个简单使用两者的例子：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// loader.js</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> urlToRequest <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;loader-utils&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> validate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;schema-utils&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> schema <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;object&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;string&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">validate</span><span class="token punctuation">(</span>schema<span class="token punctuation">,</span> options<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Example Loader&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">baseDataPath</span><span class="token operator">:</span> <span class="token string">&#39;options&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;请求文件路径：&#39;</span><span class="token punctuation">,</span> <span class="token function">urlToRequest</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>resourcePath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 对资源应用一些转换……</span>

  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">export default </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="loader-依赖" tabindex="-1"><a class="header-anchor" href="#loader-依赖" aria-hidden="true">#</a> loader 依赖</h3><p>如果一个 <code>loader</code> 使用外部资源（例如，从文件系统读取），必须声明它。 这些信息用于使缓存 <code>loaders</code> 无效，以及在 <strong>观察模式</strong> 下重编译。 下面是一个简单示例，说明如何使用 <code>addDependency</code> 方法实现上述声明：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// loader.js</span>

<span class="token keyword">import</span> path <span class="token keyword">from</span> <span class="token string">&#39;path&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> callback <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">async</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> headerPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;header.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addDependency</span><span class="token punctuation">(</span>headerPath<span class="token punctuation">)</span><span class="token punctuation">;</span>

  fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>headerPath<span class="token punctuation">,</span> <span class="token string">&#39;utf-8&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> header</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> header <span class="token operator">+</span> <span class="token string">&#39;\n&#39;</span> <span class="token operator">+</span> source<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="模块依赖" tabindex="-1"><a class="header-anchor" href="#模块依赖" aria-hidden="true">#</a> 模块依赖</h3><p>根据模块类型，可能会有不同的模式指定依赖关系。 例如在 CSS 中，使用 <code>@import</code> 和 <code>url(...)</code> 语句来声明依赖。 这些依赖关系应该由模块系统解析。</p><p>可以通过以下两种方式中的一种来实现：</p><ul><li>通过把它们转化成 <code>require</code> 语句。</li><li>使用 <code>this.resolve</code> 函数解析路径。</li></ul><p><code>css-loader</code>包 是第一种方式的一个例子。 它将 <code>@import</code> 语句替换为 <code>require</code> 其他样式文件，将 <code>url(...)</code> 替换为 <code>require</code> 引用文件， 从而实现将依赖关系转化为 <code>require</code> 声明。</p><p>而<code>less-loader</code>包，无法将每个 <code>@import</code> 转化为 <code>require</code>，因为所有 <code>.less</code> 的文件中的变量和混合跟踪必须一次编译。 因此，<code>less-loader</code> 将 less 编译器进行了扩展，自定义路径解析逻辑。 然后，利用第二种方式，通过 <code>webpack</code> 的 <code>this.resolve</code> 解析依赖。</p><h3 id="通用代码" tabindex="-1"><a class="header-anchor" href="#通用代码" aria-hidden="true">#</a> 通用代码</h3><p>避免在 <code>loader</code> 处理的每个模块中生成通用代码。 你应该在 <code>loader</code> 中创建一个运行时文件，并生成 <code>require</code> 语句以引用该共享模块：</p><p><strong>src/loader-runtime.js</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> someOtherModule <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./some-other-module&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">runtime</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> x <span class="token operator">=</span> params<span class="token punctuation">.</span>y <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token function">someOtherModule</span><span class="token punctuation">(</span>params<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>src/loader.js</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> runtime <span class="token keyword">from</span> <span class="token string">&#39;./loader-runtime.js&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">loader</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 自定义的 loader 逻辑</span>

  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">runtime</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    source<span class="token punctuation">,</span>
    <span class="token literal-property property">y</span><span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="绝对路径" tabindex="-1"><a class="header-anchor" href="#绝对路径" aria-hidden="true">#</a> 绝对路径</h3><p>不要在模块代码中插入 <strong>绝对路径</strong>，因为当项目根路径变化时，文件绝对路径也会变化。 <code>loader-utils</code> 中的 <code>stringifyRequest</code> 方法，可以将绝对路径转化为相对路径。</p><h3 id="同一个依赖" tabindex="-1"><a class="header-anchor" href="#同一个依赖" aria-hidden="true">#</a> 同一个依赖</h3><p>如果你的 <code>loader</code> 简单包裹另外一个包，你应该把这个包作为一个 <code>peerDependency</code> 引入。 这种方式允许应用程序开发者在必要情况下，在 <code>package.json</code> 中指定所需的确定版本。</p><p>例如，<code>sass-loader</code> 指定 <code>node-sass</code> 作为同等依赖，引用如下： <strong>saas-loader/package.json</strong></p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;peerDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;node-sass&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.0.0&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="测试" tabindex="-1"><a class="header-anchor" href="#测试" aria-hidden="true">#</a> 测试</h3><p>我们将使用 <a href="https://jestjs.io/" target="_blank" rel="noopener noreferrer">Jest<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 框架。 然后还需要安装 <code>babel-jest</code> 和允许我们使用 <code>import / export</code> 和 <code>async / await</code> 的一些预设环境（presets）。 让我们开始安装，并且将这些依赖保存为 <code>devDependencies</code>：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev jest babel-jest @babel/core @babel/preset-env
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>babel.config.js</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">&#39;@babel/preset-env&#39;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">targets</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">node</span><span class="token operator">:</span> <span class="token string">&#39;current&#39;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们的 <code>loader</code> 将会处理 .txt 文件，并且将任何实例中的 name 直接替换为 <code>loader</code> 选项中设置的 name。 然后返回包含默认导出文本的 JavaScript 模块：</p><p><strong>src/loader.js</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">loader</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  source <span class="token operator">=</span> source<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\[name\]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> options<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">export default </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用<a href="https://github.com/streamich/memfs" target="_blank" rel="noopener noreferrer">memfs<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 去执行 <code>webpack</code>。</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack memfs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>test/compiler.js</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> path <span class="token keyword">from</span> <span class="token string">&#39;path&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> webpack <span class="token keyword">from</span> <span class="token string">&#39;webpack&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createFsFromVolume<span class="token punctuation">,</span> Volume <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;memfs&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter">fixture<span class="token punctuation">,</span> options <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> compiler <span class="token operator">=</span> <span class="token function">webpack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">context</span><span class="token operator">:</span> __dirname<span class="token punctuation">,</span>
    <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>fixture<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;bundle.js&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.txt$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;../src/loader.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            options<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  compiler<span class="token punctuation">.</span>outputFileSystem <span class="token operator">=</span> <span class="token function">createFsFromVolume</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Volume</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  compiler<span class="token punctuation">.</span>outputFileSystem<span class="token punctuation">.</span>join <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    compiler<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> stats</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">hasErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token function">reject</span><span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>errors<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token function">resolve</span><span class="token punctuation">(</span>stats<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意：这种情况下，我们可以内联 <code>webpack</code> 配置，也可以把配置作为参数传给导出的函数。这允许我们使用相同的编译模块测试多个设置。</p><p>最后，我们来编写测试，并且添加 npm script 运行它： <strong>test/loader.test.js</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * <span class="token keyword">@jest-environment</span> node
 */</span>
<span class="token keyword">import</span> compiler <span class="token keyword">from</span> <span class="token string">&#39;./compiler.js&#39;</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;Inserts name and outputs JavaScript&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> stats <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">compiler</span><span class="token punctuation">(</span><span class="token string">&#39;example.txt&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Alice&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> output <span class="token operator">=</span> stats<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">source</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>modules<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>source<span class="token punctuation">;</span>

  <span class="token function">expect</span><span class="token punctuation">(</span>output<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&#39;export default &quot;Hey Alice!\\n&quot;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>package.json</strong></p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jest&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;jest&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;testEnvironment&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>准备就绪后，我们可以运行它，然后看新的 <code>loader</code> 是否能通过测试：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code> PASS  test/loader.test.js
  ✓ Inserts name and outputs JavaScript <span class="token punctuation">(</span>229ms<span class="token punctuation">)</span>

Test Suites: <span class="token number">1</span> passed, <span class="token number">1</span> total
Tests:       <span class="token number">1</span> passed, <span class="token number">1</span> total
Snapshots:   <span class="token number">0</span> total
Time:        <span class="token number">1</span>.853s, estimated 2s
Ran all <span class="token builtin class-name">test</span> suites.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 564469630@qq.com">kangyana</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/fe/webpack/90.html" class="" aria-label="【Q090】webpack 5 新特性"><!--[--><!--]--> 【Q090】webpack 5 新特性 <!--[--><!--]--></a></span><span class="next"><a href="/fe/webpack/92.html" class="" aria-label="【Q092】plugin"><!--[--><!--]--> 【Q092】plugin <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.2a439a8a.js" defer></script>
  </body>
</html>
