# ã€Q069ã€‘React Hooks ä½¿ç”¨åŸåˆ™ï¼Œä»¥åŠä¸ºä»€ä¹ˆ


::: tip Issue
æ¬¢è¿åœ¨ Gtihub Issue ä¸­å›ç­”æ­¤é—®é¢˜: [Issue 69](https://github.com/kangyana/daily-question/issues/69)
:::

::: tip Author
å›ç­”è€…: [kangyana](https://github.com/kangyana)
:::
## 1. Hook è§„åˆ™
`Hook` æœ¬è´¨å°±æ˜¯ **å‡½æ•°**ï¼Œä½†æ˜¯åœ¨ä½¿ç”¨å®ƒæ—¶éœ€è¦éµå¾ªä¸¤æ¡è§„åˆ™ã€‚
å®˜æ–¹æä¾›äº†ä¸€ä¸ª [linter æ’ä»¶](https://www.npmjs.com/package/eslint-plugin-react-hooks)æ¥å¼ºåˆ¶æ‰§è¡Œè¿™äº›è§„åˆ™ï¼š

## 2. åªåœ¨æœ€é¡¶å±‚ä½¿ç”¨ Hook
### ä¸è¦åœ¨å¾ªç¯ï¼Œæ¡ä»¶æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨ `Hook`ã€‚
ç¡®ä¿æ€»æ˜¯åœ¨ä½ çš„ React å‡½æ•°çš„æœ€é¡¶å±‚ä»¥åŠä»»ä½• `return` ä¹‹å‰è°ƒç”¨ä»–ä»¬ã€‚
è¿™æ ·å¯ä»¥ç¡®ä¿æ¯æ¬¡ç»„ä»¶æ¸²æŸ“ `Hook` çš„è°ƒç”¨é¡ºåºã€‚

### åŸç†åˆ†æï¼š
React æ€ä¹ˆçŸ¥é“å“ªä¸ª `state` å¯¹åº”å“ªä¸ª `useState`ï¼Ÿé é“¾è¡¨ä¸Š `Hook` è°ƒç”¨çš„é¡ºåºã€‚
```javascript
// é¦–æ¬¡æ¸²æŸ“
useState('Mary')           // 1. ä½¿ç”¨ 'Mary' åˆå§‹åŒ–å˜é‡åä¸º name çš„ state
useEffect(persistForm)     // 2. æ·»åŠ  effect ä»¥ä¿å­˜ form æ“ä½œ
useState('Poppins')        // 3. ä½¿ç”¨ 'Poppins' åˆå§‹åŒ–å˜é‡åä¸º surname çš„ state
useEffect(updateTitle)     // 4. æ·»åŠ  effect ä»¥æ›´æ–°æ ‡é¢˜

// äºŒæ¬¡æ¸²æŸ“
useState('Mary')           // 1. è¯»å–å˜é‡åä¸º name çš„ stateï¼ˆå‚æ•°è¢«å¿½ç•¥ï¼‰
useEffect(persistForm)     // 2. æ›¿æ¢ä¿å­˜ form çš„ effect
useState('Poppins')        // 3. è¯»å–å˜é‡åä¸º surname çš„ stateï¼ˆå‚æ•°è¢«å¿½ç•¥ï¼‰
useEffect(updateTitle)     // 4. æ›¿æ¢æ›´æ–°æ ‡é¢˜çš„ effect
```

å¦‚æœæˆ‘ä»¬å°†ä¸€ä¸ª `Hook` è°ƒç”¨æ”¾åˆ°ä¸€ä¸ªæ¡ä»¶è¯­å¥ä¸­ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ
```javascript
if (name !== '') {
  useEffect(function persistForm() {
    localStorage.setItem('formData', name);
  });
}
```

ç»„ä»¶æ¸²æŸ“æ—¶ï¼Œå½“æ¡ä»¶åˆ¤æ–­ä¸º true æ—¶ï¼Œä¼šè·³è¿‡è¿™ä¸ª `Hook`ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´æ„æ–™ä¹‹å¤–çš„ bug äº§ç”Ÿã€‚
```javascript
useState('Mary')           // 1. è¯»å–å˜é‡åä¸º name çš„ stateï¼ˆå‚æ•°è¢«å¿½ç•¥ï¼‰
// useEffect(persistForm)  // ğŸ”´ æ­¤ Hook è¢«å¿½ç•¥ï¼
useState('Poppins')        // ğŸ”´ 2. è¯»å–å˜é‡åä¸º surname çš„ state å¤±è´¥
useEffect(updateTitle)     // ğŸ”´ 3. æ›¿æ¢æ›´æ–°æ ‡é¢˜çš„ effect å¤±è´¥
```

### è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ Hook éœ€è¦åœ¨æˆ‘ä»¬ç»„ä»¶çš„æœ€é¡¶å±‚è°ƒç”¨ã€‚
å¦‚æœæˆ‘ä»¬æƒ³è¦æœ‰æ¡ä»¶åœ°æ‰§è¡Œä¸€ä¸ª `effect`ï¼Œå¯ä»¥å°†åˆ¤æ–­æ”¾åˆ° `Hook` çš„å†…éƒ¨ï¼š
```javascript
useEffect(function persistForm() {
  // ğŸ‘ å°†æ¡ä»¶åˆ¤æ–­æ”¾ç½®åœ¨ effect ä¸­
  if (name !== '') {
    localStorage.setItem('formData', name);
  }
});
```

## 3. åªåœ¨ React å‡½æ•°ä¸­è°ƒç”¨ Hook

è°ƒç”¨ç¯å¢ƒ | æ˜¯å¦å…è®¸
-- | --
React å‡½æ•°ç»„ä»¶ | âœ…
è‡ªå®šä¹‰ Hook | âœ…
æ™®é€š JS å‡½æ•° | âŒ
å‡½æ•°å¤– | âŒ

## 4. ESLint æ’ä»¶
ä½¿ç”¨ [eslint-plugin-react-hooks](https://www.npmjs.com/package/eslint-plugin-react-hooks) å¯ä»¥æœ‰æ•ˆçš„çº¦æŸ `Hook` é”™è¯¯çš„ä½¿ç”¨ã€‚
```bash
npm install eslint-plugin-react-hooks --save-dev
```

```javascript
// .eslintrc

{
  "plugins": [
    "react-hooks"
  ],
  "rules": {
    "react-hooks/rules-of-hooks": "error", // æ£€æŸ¥ Hook çš„è§„åˆ™
    "react-hooks/exhaustive-deps": "warn" // æ£€æŸ¥ effect çš„ä¾èµ–
  }
}
```
