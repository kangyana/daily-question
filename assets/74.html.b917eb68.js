import{_ as t,r as o,o as c,c as p,b as n,d as e,e as s,a as i}from"./app.2a439a8a.js";const u={},l=n("h1",{id:"\u3010q074\u3011\u5982\u4F55\u81EA\u5DF1\u5C01\u88C5\u4E00\u4E2A-hooks",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u3010q074\u3011\u5982\u4F55\u81EA\u5DF1\u5C01\u88C5\u4E00\u4E2A-hooks","aria-hidden":"true"},"#"),s(" \u3010Q074\u3011\u5982\u4F55\u81EA\u5DF1\u5C01\u88C5\u4E00\u4E2A Hooks")],-1),d={class:"custom-container tip"},r=n("p",{class:"custom-container-title"},"Issue",-1),k=s("\u6B22\u8FCE\u5728 Gtihub Issue \u4E2D\u56DE\u7B54\u6B64\u95EE\u9898: "),h={href:"https://github.com/kangyana/daily-question/issues/74",target:"_blank",rel:"noopener noreferrer"},v=s("Issue 74"),m={class:"custom-container tip"},_=n("p",{class:"custom-container-title"},"Author",-1),b=s("\u56DE\u7B54\u8005: "),f={href:"https://github.com/kangyana",target:"_blank",rel:"noopener noreferrer"},g=s("kangyana"),H=i(`<h2 id="_1-\u81EA\u5B9A\u4E49-hook" tabindex="-1"><a class="header-anchor" href="#_1-\u81EA\u5B9A\u4E49-hook" aria-hidden="true">#</a> 1. \u81EA\u5B9A\u4E49 Hook</h2><p>\u901A\u8FC7\u81EA\u5B9A\u4E49 <code>Hook</code>\uFF0C\u53EF\u4EE5\u5C06\u7EC4\u4EF6\u903B\u8F91\u63D0\u53D6\u5230\u53EF\u91CD\u7528\u7684\u51FD\u6570\u4E2D\u3002</p><p>\u81EA\u5B9A\u4E49 <code>Hook</code> \u662F\u4E00\u4E2A\u51FD\u6570\uFF0C\u5176\u540D\u79F0\u4EE5 \u201Cuse\u201D \u5F00\u5934\uFF0C\u51FD\u6570\u5185\u90E8\u53EF\u4EE5\u8C03\u7528\u5176\u4ED6\u7684 <code>Hook</code>\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">useFriendStatus</span><span class="token punctuation">(</span><span class="token parameter">friendID</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>isOnline<span class="token punctuation">,</span> setIsOnline<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">handleStatusChange</span><span class="token punctuation">(</span><span class="token parameter">status</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setIsOnline</span><span class="token punctuation">(</span>status<span class="token punctuation">.</span>isOnline<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    ChatAPI<span class="token punctuation">.</span><span class="token function">subscribeToFriendStatus</span><span class="token punctuation">(</span>friendID<span class="token punctuation">,</span> handleStatusChange<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      ChatAPI<span class="token punctuation">.</span><span class="token function">unsubscribeFromFriendStatus</span><span class="token punctuation">(</span>friendID<span class="token punctuation">,</span> handleStatusChange<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> isOnline<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0E React \u7EC4\u4EF6\u4E0D\u540C\u7684\u662F\uFF0C\u81EA\u5B9A\u4E49 <code>Hook</code> \u4E0D\u9700\u8981\u5177\u6709\u7279\u6B8A\u7684\u6807\u8BC6\u3002 \u6211\u4EEC\u53EF\u4EE5\u81EA\u7531\u7684\u51B3\u5B9A\u5B83\u7684\u53C2\u6570\u662F\u4EC0\u4E48\uFF0C\u4EE5\u53CA\u5B83\u5E94\u8BE5\u8FD4\u56DE\u4EC0\u4E48\u3002 \u6362\u53E5\u8BDD\u8BF4\uFF0C\u5B83\u5C31\u662F\u4E00\u4E2A\u6B63\u5E38\u7684\u51FD\u6570\u3002 \u4F46\u662F\u5B83\u7684\u540D\u5B57\u5E94\u8BE5\u59CB\u7EC8\u4EE5 <code>use</code> \u5F00\u5934\uFF0C\u8FD9\u6837\u53EF\u4EE5\u4E00\u773C\u770B\u51FA\u5176\u7B26\u5408 <code>Hook \u7684\u89C4\u5219</code>\u3002</p><h2 id="_2-\u4F7F\u7528\u81EA\u5B9A\u4E49-hook" tabindex="-1"><a class="header-anchor" href="#_2-\u4F7F\u7528\u81EA\u5B9A\u4E49-hook" aria-hidden="true">#</a> 2. \u4F7F\u7528\u81EA\u5B9A\u4E49 Hook</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">FriendStatus</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> isOnline <span class="token operator">=</span> <span class="token function">useFriendStatus</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>friend<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>isOnline <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&#39;Loading...&#39;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> isOnline <span class="token operator">?</span> <span class="token string">&#39;Online&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;Offline&#39;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u81EA\u5B9A\u4E49-hook-\u5FC5\u987B\u4EE5-use-\u5F00\u5934\u5417" tabindex="-1"><a class="header-anchor" href="#\u81EA\u5B9A\u4E49-hook-\u5FC5\u987B\u4EE5-use-\u5F00\u5934\u5417" aria-hidden="true">#</a> \u81EA\u5B9A\u4E49 <code>Hook</code> \u5FC5\u987B\u4EE5 \u201Cuse\u201D \u5F00\u5934\u5417\uFF1F</h3><p>\u5FC5\u987B\u5982\u6B64\uFF0C\u8FD9\u4E2A\u7EA6\u5B9A\u975E\u5E38\u91CD\u8981\u3002 \u4E0D\u9075\u5FAA\u7684\u8BDD\uFF0C\u7531\u4E8E\u65E0\u6CD5\u5224\u65AD\u67D0\u4E2A\u51FD\u6570\u662F\u5426\u5305\u542B\u5BF9\u5176\u5185\u90E8 <code>Hook</code> \u7684\u8C03\u7528\uFF0C React \u5C06\u65E0\u6CD5\u81EA\u52A8\u68C0\u67E5\u4F60\u7684 <code>Hook</code> \u662F\u5426\u8FDD\u53CD\u4E86 <code>Hook \u7684\u89C4\u5219</code>\u3002</p><h3 id="\u5728\u4E24\u4E2A\u7EC4\u4EF6\u4E2D\u4F7F\u7528\u76F8\u540C\u7684-hook-\u4F1A\u5171\u4EAB-state-\u5417" tabindex="-1"><a class="header-anchor" href="#\u5728\u4E24\u4E2A\u7EC4\u4EF6\u4E2D\u4F7F\u7528\u76F8\u540C\u7684-hook-\u4F1A\u5171\u4EAB-state-\u5417" aria-hidden="true">#</a> \u5728\u4E24\u4E2A\u7EC4\u4EF6\u4E2D\u4F7F\u7528\u76F8\u540C\u7684 Hook \u4F1A\u5171\u4EAB state \u5417\uFF1F</h3><p>\u4E0D\u4F1A\u3002 \u81EA\u5B9A\u4E49 <code>Hook</code> \u662F\u4E00\u79CD\u91CD\u7528\u72B6\u6001\u903B\u8F91\u7684\u673A\u5236(\u4F8B\u5982\u8BBE\u7F6E\u4E3A\u8BA2\u9605\u5E76\u5B58\u50A8\u5F53\u524D\u503C)\u3002 \u6240\u4EE5\u6BCF\u6B21\u4F7F\u7528\u81EA\u5B9A\u4E49 <code>Hook</code> \u65F6\uFF0C\u5176\u4E2D\u7684\u6240\u6709 <code>state</code> \u548C\u526F\u4F5C\u7528\u90FD\u662F\u5B8C\u5168\u9694\u79BB\u7684\u3002</p><h3 id="\u81EA\u5B9A\u4E49-hook-\u5982\u4F55\u83B7\u53D6\u72EC\u7ACB\u7684-state" tabindex="-1"><a class="header-anchor" href="#\u81EA\u5B9A\u4E49-hook-\u5982\u4F55\u83B7\u53D6\u72EC\u7ACB\u7684-state" aria-hidden="true">#</a> \u81EA\u5B9A\u4E49 Hook \u5982\u4F55\u83B7\u53D6\u72EC\u7ACB\u7684 state\uFF1F</h3><p>\u6BCF\u6B21\u8C03\u7528 <code>Hook</code>\uFF0C\u5B83\u90FD\u4F1A\u83B7\u53D6\u72EC\u7ACB\u7684 <code>state</code>\u3002</p>`,13);function y(x,w){const a=o("ExternalLinkIcon");return c(),p("div",null,[l,n("div",d,[r,n("p",null,[k,n("a",h,[v,e(a)])])]),n("div",m,[_,n("p",null,[b,n("a",f,[g,e(a)])])]),H])}const O=t(u,[["render",y],["__file","74.html.vue"]]);export{O as default};
